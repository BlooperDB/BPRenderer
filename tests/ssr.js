const {LoadData, ParseBP} = require('../factorio');
const {createCanvas, Image} = require('canvas');
const fs = require('fs');

LoadData(JSON.parse(fs.readFileSync("data.json").toString("utf-8")));

const blueprint = '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';

const imageCache = {};

function imageResolver (name, shadow) {
    let filename = name;

    if (shadow) {
        filename += "_shadow"
    }

    if (imageCache[filename] !== undefined) {
        return imageCache[filename];
    }

    if (!fs.existsSync("images/" + filename + ".png")) {
        return
    }

    const image = new Image();
    image.src = fs.readFileSync("images/" + filename + ".png");

    imageCache[filename] = image;

    return image;
}

function render (bp) {
    const size = bp.getSize();

    const scaling = 32;
    const canvas = createCanvas((size.width + 2) * scaling, (size.height + 2) * scaling);

    bp.render(canvas, imageResolver);
    return canvas
}

const bp = ParseBP(blueprint);

fs.writeFileSync("ssr.html", '<img src="' + render(bp).toDataURL() + '" /><textarea>' + JSON.stringify(bp.entities) + '</textarea>');

/*
const loops = 50;
const start = (new Date()).getTime();
for (let i = 0; i < loops; i++) {
    render(bp)
}
const taken = (new Date()).getTime() - start;

console.log();
console.log("Time taken:", taken + "ms", "AVG:", (taken / loops) + "ms");
*/